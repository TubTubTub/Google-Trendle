#%%
from pytrends.request import TrendReq

from io import BytesIO
from base64 import decodebytes
from PIL import Image

import numpy as np
import pandas as pd

pytrends = TrendReq(hl='en-GB', tz=0)

def get_simplest_test():
    return "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAKAAoDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAACAAE/8QAIhAAAQQCAAcBAAAAAAAAAAAAAQIDBAUAEQYJEhchWJfS/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AFT3q5gPpPw19IifjE5RSbWbR10y+q0Vtm/EZdmwkPh9MZ9SAXGg4AAsJUSnqAG9b15zdlgf/9k="
def get_test_string():
    return "data:image/jpeg;base64,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"

class Trend:
    @staticmethod
    def get_data(keyword, timeframe):
        pytrends.build_payload(kw_list=[keyword], timeframe=[timeframe])
        return pytrends.interest_over_time()
    
    def parse_data_url(data_url):
        data = data_url.split(',')[1]
        image = Image.open(BytesIO(decodebytes(bytes(data, 'utf-8'))))
        pixels = image.convert('L')
        pixels_array = np.array(pixels.getdata()).reshape(image.size + (1,))
        indices_array = np.moveaxis(np.indices(image.size), 0, 2)
        allArray = np.dstack((indices_array, pixels_array)).reshape((-1, 3))
        print(pixels_array.shape)
        print(allArray.shape)

        df = pd.DataFrame(allArray, columns=['y', 'x', 'value'])
        return df
# %%


# %%
import matplotlib.pyplot as plt
data = Trend.parse_data_url(get_test_string())

with pd.option_context('display.max_rows', None, 'display.max_columns', None):
    print(data[data['value'] != 255])

data['value'] = (255 - data['value']) / 3
# HAHA I FUCKING GOT IT, USING PERCENTAGES FOR REACT CANVAS MESSES UP PLOT AHHHHH
data.plot.scatter('x', 'y', 'value')
# %%